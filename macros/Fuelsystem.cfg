#textdomain wesnoth-TOPGUN

#define FUELATRIBUTE CAPICY TYPE
[event]
        name=unit placed
        first_time_only=no
        [modify_unit]
            [filter]
                ability=FUELUSAGE
                type={TYPE}
                [not]
                 status=FUEL_APLIED
                [/not]
                
            [/filter]
                [set_variable]
                    name=FUEL
                    value={CAPICY}
                [/set_variable]
                [object]
                    [effect]
                        apply_to=status
                        add=FUEL_APLIED
                    [/effect]
                [/object]
        [/modify_unit]
        
[/event]

[event]
        name=new turn
        first_time_only=no
        [if]
        side=$side_number
            [then]
                [modify_unit]
                    [filter]
                        ability=FUELUSAGE
                        type={TYPE}
                            [not]
                                [filter_adjacent]
                                
                                is_enemy=no
                                    [and]
                                    ability=AIRBASRE1
                                    [/and]
                                [/filter_adjacent]
                            [/not]
                        
                            [not]
                                ability=NAVALAIRCRAFT
                                [filter_adjacent]
                                is_enemy=no
                                    [and]
                                    ability=healing2
                                    [/and]
                                [/filter_adjacent]
                            [/not]
                            [not]
                                [not]
                                    ability=AIRTANKER
                                [/not]
                                [filter_adjacent]
                                    is_enemy=no
                                    [and]
                                        ability=AIRTANKER
                                    [/and]
                                [/filter_adjacent]
                            [/not]
                    [/filter]
                    [set_variable]
                        name=FUEL
                        sub=1
                    [/set_variable]
                [/modify_unit]
            [/then]
        [/if]    
[/event]
          
[event]
        name=new turn
        first_time_only=no

        [modify_unit]
            
            [filter]
                side=$side_number
                ability=FUELUSAGE
                type={TYPE}
                [filter_adjacent]
                is_enemy=no
                    [and]
                    ability=AIRBASRE1
                    [/and]
                [/filter_adjacent]
                [or]
                    ability=NAVALAIRCRAFT
                    side=$side_number
                    ability=FUELUSAGE
                    type={TYPE}
                    [filter_adjacent]
                    is_enemy=no
                        [and]
                        ability=healing2
                        [/and]
                    [/filter_adjacent]
                [/or]
                [or]
                    side=$side_number
                    ability=FUELUSAGE
                    type={TYPE}
                    [filter_adjacent]
                    is_enemy=no
                        [and]
                        ability=AIRTANKER
                        [/and]
                    [/filter_adjacent]
                    [not]
                        ability=AIRTANKER
                    [/not]
                [/or]
            [/filter]
            [set_variable]
                name=FUEL
                value={CAPICY}
            [/set_variable]
        [/modify_unit]
                    
                
[/event]        

[event]
        name=new turn
        first_time_only=no
            
        [kill]
            [filter_wml]
                [variables]
                FUEL=0
                [/variables]
            [/filter_wml]
            animate=yes
        [/kill]
               
                       
           
            
[/event]

[event]
    name=new turn
    first_time_only=no
                
                [modify_unit]
                    [filter]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=1
                                [/variables]
                            [/filter_wml]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=2
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=3
                                [/variables]
                            [/filter_wml]
                        [/or]
                        
                    [/filter]
                    [object]
                        duration=scenario
                        id="LOWFUEL"
                        [effect]
                            apply_to=overlay
                            add="misc/LOWFUEL.png"
                        [/effect]
                    [/object]
                [/modify_unit]

                [modify_unit]
                    [filter]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=4
                                [/variables]
                            [/filter_wml]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=5
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=6
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=7
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=8
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=9
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=10
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=11
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=12
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=13
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=14
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=15
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=16
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=17
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=18
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=19
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=20
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=21
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=22
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=23
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=24
                                [/variables]
                            [/filter_wml]
                        [/or]
                        [or]
                        type={TYPE}
                            [filter_wml]
                                [variables]
                                FUEL=25
                                [/variables]
                            [/filter_wml]
                        [/or]
                    [/filter]
                    [object]
                        duration=scenario
                        id="FUELHAVE"
                        [effect]
                            apply_to=overlay
                            add="misc/FUELNormal.png"
                        [/effect]
                    [/object]
                [/modify_unit]

    
[/event]



#enddef

#define TESTINGCODe

                

[if]
            side=$side_number
            [have_unit]
                
                ability=FUEL
                [filter_adjacent]
                    is_enemy=no
                    
                    [and]
                         ability=AIRBASRE1
                        
                    [/and]
                [/filter_adjacent]
            [/have_unit]
            [then]
                
                [modify_unit]
                    [filter]
                        ability=FUEL
                        [filter_adjacent]
                            is_enemy=no
                                [and]
                                    ability=AIRBASRE1
                                [/and]
                        [/filter_adjacent]
                            
                    [/filter]
                    [set_variable]
                        add={CAPICY}
                        name=FUEL
                    [/set_variable]
                [/modify_unit]
                    
            [/then]
        [/if]
#enddef